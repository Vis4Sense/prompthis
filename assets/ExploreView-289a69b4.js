import{d as x,u as B,b as S,r as w,y as F,C as q,D as N,E as C,e as m,f,h as c,B as L,w as T,S as V,G as k,p as t}from"./index-3db1096c.js";import{a as R,V as $,_ as h,b as E}from"./VFullImage-bc0ff04e.js";const P={class:"h-screen w-full flex flex-col"},b={key:0,class:"flex-auto overflow-auto flex"},O=x({__name:"ExploreView",setup(D){const I=B(),s=S(),u=R(),r=w(!1),{fullImageModal:p,fullImageData:_}=F(u);return q(async()=>{const a=I.query,e=a.username,o=a.userid,n=a.sessionid;e&&e!==s.userName?await s.userLogIn(e):o!==void 0&&parseInt(o)!==s.userId&&s.userLogInById(parseInt(o)),n!==void 0&&parseInt(n)!==s.sessionId&&s.setSessionId(parseInt(n)),r.value=!0}),N(async(a,e)=>{const o=a.query,n=e.query,l=o.username,i=o.userid,d=o.sessionid,g=n.username,v=n.userid,y=n.sessionid;l&&l!==g?await s.userLogIn(l):i!==void 0&&i!==v&&s.userLogInById(parseInt(i)),d!==void 0&&d!==y&&s.setSessionId(parseInt(d)),r.value=!0}),C((a,e)=>{a.name==="home"&&(r.value=!1,s.emptyStore())}),(a,e)=>(m(),f("div",P,[c(h),r.value?(m(),f("div",b,[(m(),L(V,null,{default:T(()=>[c(E,{class:"flex-1",onOpenImage:e[0]||(e[0]=o=>t(u).openFullImage(o))})]),_:1}))])):k("",!0),c($,{"modal-open":t(p),"image-data":t(_),onCloseImage:e[1]||(e[1]=o=>t(u).closeFullImage())},null,8,["modal-open","image-data"])]))}});export{O as default};
