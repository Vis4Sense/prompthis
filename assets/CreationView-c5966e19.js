import{d as m,t as B,r as w,m as F,e as c,f as x,g as n,j as R,v as q,n as L,p as h,q as D,s as S,b as $,x as E,y as v,h as f,F as G,z as K,A as M,B as C,w as T,S as b,u as j,C as z,D as A,E as U,G as O}from"./index-3db1096c.js";import{u as W,a as N,V as H,_ as J,b as Q}from"./VFullImage-bc0ff04e.js";const X="/prompthis/assets/help-78ab23f0.svg",Y={class:"text-neutral-50 flex flex-col"},Z=n("span",null,"Create",-1),ee={class:"flex-auto"},se=["placeholder","onKeydown"],te={class:"input-cheat-sheet mt-2"},ne={class:"input-cheat-sheet-title flex text-neutral-200"},ae=["src"],oe=n("span",{class:"text-xs px-1"},"Stable Diffusion Prompt",-1),le=D('<div class="input-cheat-sheet-content text-neutral-400"><div class="input-cheat-sheet-content-item"><span class="text-xs">(phrase)</span><span class="text-xs text-neutral-500">-&gt;</span><span class="text-xs">weight * 1.1</span></div><div class="input-cheat-sheet-content-item"><span class="text-xs">((phrase))</span><span class="text-xs text-neutral-500">-&gt;</span><span class="text-xs">weight * 1.1 * 1.1</span></div><div class="input-cheat-sheet-content-item"><span class="text-xs">[phrase]</span><span class="text-xs text-neutral-500">-&gt;</span><span class="text-xs">weight / 1.1</span></div><div class="input-cheat-sheet-content-item"><span class="text-xs">[[phrase]]</span><span class="text-xs text-neutral-500">-&gt;</span><span class="text-xs">weight / (1.1 * 1.1)</span></div></div><div class="input-cheat-sheet-example"><div class="input-cheat-sheet-example-item"><span class="text-xs text-neutral-200">Example: </span><span class="text-xs text-neutral-400">penguin holding a (beer)</span></div></div>',2),re=m({__name:"VInput",props:{placeholderText:{type:String,default:"Enter your prompt..."},copiedText:{type:String,default:null}},emits:["enterInput"],setup(_,{emit:r}){const s=_,{copiedText:l}=B(s),a=w(""),i=r,u=()=>{i("enterInput",a.value),setTimeout(()=>{a.value=""},0)};F(l,e=>{e&&d(e)});const d=e=>{a.value.length===0?a.value=e:a.value.endsWith(" ")?a.value+=e:a.value+=" "+e};return(e,o)=>(c(),x("div",Y,[Z,n("div",ee,[R(n("textarea",{ref:"textareaRef",type:"text",class:"bg-neutral-700 p-1 w-full h-full focus:outline-none","onUpdate:modelValue":o[0]||(o[0]=t=>a.value=t),placeholder:_.placeholderText,onKeydown:L(u,["enter"])},null,40,se),[[q,a.value]])]),n("div",te,[n("div",ne,[n("img",{src:h(X),width:"16",alt:"help"},null,8,ae),oe]),le])]))}}),ie={class:"p-2 cursor-pointer text-neutral-300"},ce={class:"border border-gray-500 rounded-md flex flex-row items-center box"},ue=n("div",{class:"flex justify-center items-center icon-add px-2"},[n("p",{class:"text-lg"},"+")],-1),de={class:"flex items-center flex-auto"},pe={class:"text-sm"},he=m({__name:"VNewSession",props:{description:{type:String,default:""}},setup(_){return(r,s)=>(c(),x("div",ie,[n("div",ce,[ue,n("div",de,[n("p",pe,S(_.description),1)])])]))}}),xe={class:"h-full flex flex-col"},_e={class:"p-2 text-neutral-300 h-full flex-auto overflow-y-auto"},fe=["onClick"],me=m({__name:"TheViewSessionList",async setup(_){let r,s;const l=$();[r,s]=E(()=>l.fetchSessions()),await r,s();const{sessions:a,sessionId:i}=v(l),u=()=>{l.createSession()},d=e=>{l.setSessionId(e)};return(e,o)=>(c(),x("div",xe,[f(he,{description:"New Session",onClick:u}),n("div",_e,[(c(!0),x(G,null,K(h(a),t=>(c(),x("div",{class:M(["px-2 py-1 rounded-md cursor-pointer hover:bg-neutral-600",{"bg-neutral-700":t.sessionId===h(i)}]),key:t.sessionId,onClick:p=>d(t.sessionId)},[n("div",null,S(t.sessionName),1)],10,fe))),128))])]))}}),ve={class:"bg-neutral-900 h-full flex flex-col"},ge={class:"h-1/2"},Ie={class:"h-1/2 p-2"},ye=m({__name:"ThePanelCreate",setup(_){const r=W(),s=N(),{cache:l}=v(r),{copiedPrompt:a}=v(s),i=u=>{if(l.value){window.alert("Please wait for the current generation to finish");return}const d={prompt:u.trim()};r.runGeneration(d)};return(u,d)=>(c(),x("div",ve,[n("div",ge,[(c(),C(b,null,{default:T(()=>[f(me)]),_:1}))]),n("div",Ie,[f(re,{class:"h-full","copied-text":h(a)||void 0,onEnterInput:i},null,8,["copied-text"])])]))}}),we={class:"h-screen w-full flex flex-col"},Se={key:0,class:"flex-auto overflow-auto flex"},Te=m({__name:"CreationView",setup(_){const r=j(),s=$(),l=N(),a=w(),i=w(!1),{fullImageModal:u,fullImageData:d}=v(l);return z(async()=>{const e=r.query,o=e.username,t=e.userid,p=e.sessionid;if(o&&o!==s.userName)await s.userLogIn(o);else if(t!==void 0&&parseInt(t)!==s.userId){alert("Invalid url. Please log in from the home page.");return}p!==void 0&&parseInt(p)!==s.sessionId&&s.setSessionId(parseInt(p)),i.value=!0}),A(async(e,o)=>{const t=e.query,p=o.query,g=t.username,I=t.userid,y=t.sessionid,V=p.username,P=p.userid,k=p.sessionid;g&&g!==V?await s.userLogIn(g):I!==void 0&&I!==P&&s.userLogInById(parseInt(I)),y!==void 0&&y!==k&&s.setSessionId(parseInt(y)),i.value=!0}),U((e,o)=>{e.name==="home"&&(i.value=!1,s.emptyStore())}),(e,o)=>(c(),x("div",we,[f(J),i.value?(c(),x("div",Se,[f(ye,{class:"min-w-50 w-15/100",ref_key:"createPanelRef",ref:a},null,512),(c(),C(b,null,{default:T(()=>[f(Q,{class:"flex-1",onOpenImage:o[0]||(o[0]=t=>h(l).openFullImage(t))})]),_:1}))])):O("",!0),f(H,{"modal-open":h(u),"image-data":h(d),onCloseImage:o[1]||(o[1]=t=>h(l).closeFullImage())},null,8,["modal-open","image-data"])]))}});export{Te as default};
